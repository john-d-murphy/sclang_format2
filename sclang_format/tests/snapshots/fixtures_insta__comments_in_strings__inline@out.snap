---
source: tests/fixtures_insta.rs
expression: out
---
(
// comment / string torture test

// line comment with operators and pipes and braces
// a=1+2*3; { |x| x + 1 } foo (1, 2) arr[0]

// block comment with nested-looking stuff (but SC doesn't nest comments)
/*
    if(x>0){
        "nope".postln;
    }
    { |a, b| a + b }.value;
*/

// strings with quotes and backslashes
"This string has \"quotes\" and backslashes \\ and ( parens ) and [ brackets ] and { braces }".postln;
'this has a single quote\' and stuff'.postln;  // SC-style single-quote strings are rare, but we test anyway

// tricky escaped quotes
"This is a \"nested \\\"quote\\\"\" test".postln;

// code that *should* be formatted normally
var a, b;
a = 1 + 2;
if (a > 0) {
    "ok".postln
};

// make sure pipes inside strings don't trigger pipe rules
"{ |x, y| x + y } in a string".postln;
)
